<div class="user-create">
  <section class="content-header">
    <h1>
      {{t "views.app.user.create.title"}}
    </h1>
  </section>

  <section class="content">

    <div class="row">
      <AccessControl @aclContext="App.User.Create">
        <div class="col-md-8">

          <div class="box box-primary">
            <div class="box-header with-border">
              <h3 class="box-title">
                {{t "views.app.user.create.userInfo" }}
              </h3>
            </div>

            <div class="form box-body no-padding">
              <FormFields::FieldText 
                @placeholder={{t "views.app.user.create.nameplaceholder" }}
                @label={{t "views.app.user.create.name" }} 
                @type="text" 
                @value={{this.model.name}} 
                @data-field="user.name"
                @lengthRequired={{false}}
                @validate={{action this.validateField "userCreate" (hash name="name" value=this.model.name)}}
                @message={{this.message.userCreate.name}}
                @aclContext="App.User.Create.Name"
                {{autofocus}} 
              />

              <FormFields::FieldText 
                @placeholder={{t "views.app.user.create.emailplaceholder" }}
                @label={{t "views.app.user.create.email" }}
                @type="text" 
                @value={{this.model.email}}
                @data-field="user.email" 
                @lengthRequired={{false}} 
                @mask="email"
                @validate={{action this.validateField "userCreate" (hash name="email" value=this.model.email)}}
                @message={{this.message.userCreate.email}}     
                @aclContext="App.User.Create.Email"         
              />

              <FormFields::FieldText 
                @placeholder={{t "views.app.user.create.usernameplaceholder"}}
                @label={{t "views.app.user.create.username"}} 
                @type="text" 
                @value={{@model.username}}
                @data-field="user.username" 
                @lengthRequired={{false}}
                @onInput={{this.onInput}}
                @validationMessage={{this.validationMessage}}
                @isSuccessful={{this.isSuccessful}}
                @validate={{action this.validateField "userCreate" (hash name="username" value=this.model.username)}}
                @message={{this.message.userCreate.username}}       
                @aclContext="App.User.Create.UserName"      
              />

              <FormFields::FieldDate 
                @placeholder={{t "views.app.user.create.dobplaceholder" }}
                @label={{t "views.app.user.create.dateofbirth" }} 
                @value="{{readonly this.model.dateOfBirth}}"
                @update={{action "selectStatic" this.model 'dateOfBirth' }} 
                @mask="alphanumeric"
                @data-field="user.dateOfBirth" 
                @format="DD-MM" 
                @singleDatePicker={{true}}
                @showDropdowns={{true}} 
                @positionX="right" 
                @positionY="down" 
                @autoApply={{true}} 
                @minDate="01-01"
                @startDate="01-01"
                @parentEl='[data-field="user.dateOfBirth"]'
                @endDate="31-12"
                @maxDate="31-12"
                @validate={{action this.validateField "userCreate" (hash name="dateOfBirth" value=this.model.dateOfBirth)}}
                @message={{this.message.userCreate.dateOfBirth}}     
                @aclContext="App.User.Create.DateOfBirth"
              />

              <FormFields::FieldText 
                @placeholder={{t "views.app.user.create.passwordplaceholder" }}
                @label={{t "views.app.user.create.password" }}
                @type="password" 
                @value={{this.model.password}}
                @data-field="user.password" 
                @lengthRequired={{false}}
                @validate={{action this.validateField "userCreate" (hash name="password" value=this.model.password)}}
                @message={{this.message.userCreate.password}}
                @aclContext="App.User.Create.Password"
              />

              <FormFields::FieldText 
                @placeholder={{t "views.app.user.create.confirmpasswordplaceholder" }}
                @label={{t "views.app.user.create.confirmpassword" }}
                @type="password" 
                @value={{this.model.passwordConfirmation}}
                @data-field="user.confirmPassword" 
                @lengthRequired={{false}} 
                @validate={{action this.validateField "userCreate" (hash name="passwordConfirmation" value=this.model.passwordConfirmation)}}
                @message={{this.message.userCreate.passwordConfirmation}}
                @aclContext="App.User.Create.ConfirmPassword"
              />                        

            </div>
          </div>

        </div>
      </AccessControl>

      <div class="col-md-4">
        <AccessControl @aclContext="App.User.Create.Language.Create">
          <div class="box box-primary">
            <div class="box-header with-border">
              <h3 class="box-title">
                {{t "views.app.user.create.language"}}
              </h3>

              <div class="box-body">
                <AppUi::Language
                  @placeholder={{t "views.app.user.create.languageplaceholder"}}
                  @label={{t "views.app.user.create.languagelabel"}}
                  @value={{this.model.language}}
                  @onchange={{action "selectRelated" this.model 'language'}}
                  @model={{this.model}}
                  @data-field="user.language"
                  @validate={{action this.validateField "userSchema" (hash name="language" value=this.model.language)}}
                  @message={{this.message.language}}
                  @aclContext="App.User.Create.Language"
                />
              </div>
            </div>
          </div>
        </AccessControl>

        <AccessControl @aclContext="App.User.Create.Timezone.Create">
          <div class="box box-primary">
            <div class="box-header with-border">
              <h3 class="box-title">
                {{t "views.app.user.create.timezone"}}
              </h3>

            <User::Create::Timezones
              @value={{this.model.timezone}}
              @model={{this.model}}
              @selectRelated={{this.selectRelated}}
              @validate={{action this.validateField "userSchema" (hash name="timezone" value=this.model.timezone)}}
              @message={{this.message.timezone}}
              @aclContext="App.User.Create.Timezone"
            />
            </div>
            
          </div>
        </AccessControl>
      </div>

    <div class="col-sm-12">
      <AppUi::Button type="button" data-btn="save" class="btn btn-primary" @onClick={{fn this.save "userCreate"}} @disableOnSuccess={{true}} @aclContext="App.User.Create">{{t "global.form.save"}}</AppUi::Button>
      <AppUi::Button type="button" data-btn="cancel" class="btn btn-default" @onClick={{this.cancel}}>{{t "global.form.cancel"}}</AppUi::Button>
    </div>
        
    </div>

  </section>
</div>